# Task Manager – Frontend

Next.js PWA frontend for the Task Manager: dashboard, task CRUD, real-time updates via Socket.IO, and optional push notifications.

## Tech Stack

- **Framework:** Next.js 16 (App Router)
- **UI:** React 19, TypeScript, Tailwind CSS, Lucide icons
- **Real time:** socket.io-client
- **PWA:** next-pwa (service worker), manifest.json, icons (192×192, 512×512)

## Setup

1. **Install dependencies**

   ```bash
   npm install
   ```

2. **Environment**

   ```bash
   cp .env.example .env
   ```

   Edit `.env` if the backend is not at `http://localhost:5002`:

   - `NEXT_PUBLIC_API_BASE_URL` – API base URL
   - `NEXT_PUBLIC_WS_URL` – Socket.IO URL (defaults to API base URL)
   - `NEXT_PUBLIC_VAPID_PUBLIC_KEY` – only needed for push (same as backend VAPID public key)

## Run

- **Development:** `npm run dev` → http://localhost:3000
- **Production build:** `npm run build` then `npm start`
- **Lint:** `npm run lint`
- **Tests:** `npm test`

## PWA

- **Manifest:** `public/manifest.json` (name, icons, display, start_url).
- **Service worker:** Generated by next-pwa (enabled in production; disabled in dev).
- **Icons:** `public/icon-192x192.png`, `public/icon-512x512.png`.

To test installability and install prompt, use a **production** build (`npm run build && npm start`). See root **PWA_TESTING.md** for steps.

## Project Structure

- `app/` – App Router pages (login, dashboard, profile, admin)
- `components/` – TaskCard, TaskModal, ConfirmDialog
- `lib/` – API clients (auth, tasks, push, admin), constants, service worker registration

## Real-Time Updates

The dashboard connects to the backend via Socket.IO, sends the JWT with `authenticate`, then listens for `task_created`, `task_updated`, `task_deleted` and updates the task list without a full refresh.

## Push Notifications

If `NEXT_PUBLIC_VAPID_PUBLIC_KEY` is set and the user grants permission, the app subscribes to push and sends the subscription to `POST /api/push/subscribe`. The backend then sends notifications for task events and due-date reminders.
